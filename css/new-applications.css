/* New Applications Styles - Common Base */

/* Base application container styling */
.function-calculator-container,
.equation-solver-container,
.unit-converter-container,
.statistical-calculator-container,
.combinatorics-calculator-container,
.enhanced-matrix-calculator-container {
    padding: 20px;
    max-width: 100%;
    margin: 0 auto;
    min-height: 100vh;
    box-sizing: border-box;
}

/* App titles */
.app-title {
    font-size: 2rem;
    font-weight: bold;
    text-align: center;
    margin-bottom: 30px;
    color: white;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

/* Main controls layout - enhanced positioning */
.function-controls,
.equation-controls,
.unit-converter-controls,
.stats-controls,
.combinatorics-controls,
.enhanced-matrix-controls {
    display: flex;
    flex-direction: column;
    gap: 30px;
    margin-bottom: 40px;
    align-items: center;
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
    position: relative;
    z-index: 10;
    padding: 0 20px;
}

/* Input panels - unified blur style with enhanced positioning */
.function-input-panel,
.equation-type-selector,
.unit-category-selector,
.stats-input-panel,
.operation-type-selector {
    background: var(--liquid-glass-bg);
    backdrop-filter: var(--liquid-glass-blur);
    -webkit-backdrop-filter: var(--liquid-glass-blur);
    border: var(--liquid-glass-border);
    box-shadow: var(--liquid-glass-shadow);
    border-radius: 20px;
    padding: 30px;
    margin-bottom: 25px;
    position: relative;
    overflow: visible;
    width: 100%;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
    z-index: 5;
}

/* Matrix operation selector without blur */
.matrix-operation-selector {
    background: transparent;
    border: none;
    box-shadow: none;
    border-radius: 0;
    padding: 15px;
    margin-bottom: 25px;
    position: relative;
    overflow: visible;
    width: 100%;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
    z-index: 5;
    text-align: center;
}

/* Enhanced Matrix Calculator - operation selector styling */
#matrixCalculatorApp .operation-selector {
    margin-bottom: 15px;
    text-align: center;
    position: relative;
    z-index: 1003;
    display: inline-block;
    gap: 5px;
    background: transparent;
    border: none;
    box-shadow: none;
    padding: 15px;
}

/* Input groups */
.function-input-group,
.equation-input-group,
.unit-input-group,
.stats-input-group,
.param-input-group,
.size-input-group {
    margin-bottom: 20px;
}

.function-input-group label,
.equation-input-group label,
.unit-input-group label,
.stats-input-group label,
.param-input-group label,
.size-input-group label {
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
    color: white;
    font-size: 15px;
}

/* Equation display */
.equation-display {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 15px;
    margin: 15px 0;
    text-align: center;
}

.equation-display p {
    color: white;
    font-size: 18px;
    margin: 0;
}

#equationPreview {
    color: var(--clr-accent);
    font-weight: bold;
    font-family: monospace;
}

/* Matrix input styling */
.matrix-input {
    width: 60px;
    height: 40px;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 5px;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 14px;
    padding: 5px;
}

.matrix-input:focus {
    outline: none;
    border-color: var(--clr-accent);
    background: rgba(255, 255, 255, 0.15);
}

.matrix-input-container h3 {
    color: white;
    margin-bottom: 20px;
    text-align: center;
}

/* Enhanced matrix input grid */
#matrixInputGrid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    justify-content: center;
    align-items: center;
}

/* History containers styling */
.history-list .empty-history {
    color: rgba(255, 255, 255, 0.6);
    font-style: italic;
    text-align: center;
    padding: 20px;
}

/* Result content styling */
.result-content {
    color: #333;
    line-height: 1.6;
    font-size: 16px;
}

.result-content h3 {
    color: #333;
    margin-bottom: 15px;
}

/* Info card styling */
.function-info-card {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 20px;
    margin-top: 15px;
}

.function-info-card h4 {
    color: var(--clr-accent);
    margin-bottom: 10px;
}

.info-content {
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.5;
}

/* Steps and formula containers */
.steps-content,
.formula-content {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    padding: 20px;
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
}

/* Enhanced responsive for result containers */
@media (max-width: 600px) {
    .result-container,
    .error-container,
    .history-container,
    .stats-results-container,
    .enhanced-result-container,
    .steps-container,
    .formula-container {
        margin: 20px 10px;
        padding: 20px 15px;
    }
}

/* Statistics items */
.stat-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.9);
}

.stat-item:last-child {
    border-bottom: none;
}

.stat-label {
    font-weight: 600;
}

.stat-value {
    color: var(--clr-accent);
    font-weight: bold;
}

/* Input fields and selects */
.function-select, .function-input,
.equation-select, .equation-input,
.unit-select, .unit-input,
.stats-select, .stats-textarea,
.combinatorics-select, .combinatorics-input,
.matrix-select, .size-input {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 16px;
    transition: all 0.3s ease;
    box-sizing: border-box;
}

.function-select:focus, .function-input:focus,
.equation-select:focus, .equation-input:focus,
.unit-select:focus, .unit-input:focus,
.stats-select:focus, .stats-textarea:focus,
.combinatorics-select:focus, .combinatorics-input:focus,
.matrix-select:focus, .size-input:focus {
    outline: none;
    border-color: var(--clr-accent);
    box-shadow: 0 0 0 3px rgba(224, 122, 95, 0.3);
    background: rgba(255, 255, 255, 0.15);
}

/* Button styles - unified with matrix calculator */
.function-btn, .equation-btn, .unit-btn, .stats-btn, .combinatorics-btn, .matrix-btn {
    background: var(--liquid-glass-bg);
    backdrop-filter: var(--liquid-glass-blur);
    -webkit-backdrop-filter: var(--liquid-glass-blur);
    border: var(--liquid-glass-border);
    box-shadow: var(--liquid-glass-shadow);
    color: black;
    border-radius: 25px;
    padding: 12px 24px;
    font-size: 1.1rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
    z-index: 1;
    min-width: 120px;
    text-align: center;
    display: inline-block;
}

.function-btn:hover, .equation-btn:hover, .unit-btn:hover,
.stats-btn:hover, .combinatorics-btn:hover, .matrix-btn:hover {
    color: white;
    background-color: rgba(224, 122, 95, 0.8);
    transform: translateY(-2px);
    box-shadow: 
        0 6px 12px rgba(0, 0, 0, 0.25),
        inset 0 0 0 1px rgba(255, 255, 255, 0.1);
}

.function-btn:active, .equation-btn:active, .unit-btn:active,
.stats-btn:active, .combinatorics-btn:active, .matrix-btn:active {
    transform: scale(0.95);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Button containers - enhanced spacing and alignment */
.function-buttons,
.equation-buttons,
.unit-buttons,
.stats-buttons,
.combinatorics-buttons,
.matrix-action-buttons {
    display: flex;
    gap: 25px;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    margin: 30px auto;
    padding: 20px 0;
    max-width: 900px;
    position: relative;
    z-index: 10;
}

/* Canvas containers - unified blur style with enhanced positioning */
.function-canvas-container,
.stats-chart-container,
.visualization-container {
    background: var(--liquid-glass-bg);
    backdrop-filter: var(--liquid-glass-blur);
    -webkit-backdrop-filter: var(--liquid-glass-blur);
    border: var(--liquid-glass-border);
    box-shadow: var(--liquid-glass-shadow);
    border-radius: 20px;
    padding: 30px;
    text-align: center;
    margin: 30px auto;
    position: relative;
    z-index: 5;
    max-width: 1000px;
    width: 100%;
}

.function-canvas,
.stats-canvas,
.matrix-canvas {
    background: white;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    max-width: 100%;
    height: auto;
}

/* Result containers - unified with matrix calculator blur style and enhanced positioning */
.result-container,
.error-container,
.history-container,
.stats-results-container,
.enhanced-result-container,
.steps-container,
.formula-container {
    background: white;
    border-radius: 20px;
    padding: 25px;
    margin: 30px auto;
    text-align: center;
    font-weight: bold;
    font-family: 'Courier New', monospace;
    font-size: 16px;
    color: black;
    min-height: 120px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    overflow-y: auto;
    width: 100%;
    max-width: 700px;
    border: 1px solid var(--clr-fg-en);
    box-shadow: 0 6px 15px rgba(0,0,0,0.15), 
                inset 0 0 0 1px rgba(0,0,0,0.05);
    z-index: 800;
    position: relative;
}

.error-container {
    background: rgba(220, 53, 69, 0.15);
    border: 2px solid rgba(220, 53, 69, 0.5);
    color: #dc3545;
    backdrop-filter: blur(10px);
    border-radius: 15px;
}

/* Specific styles for new applications elements */

/* Function Calculator specific */
.function-info-card {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    padding: 15px;
    margin-top: 20px;
}

.info-item {
    margin-bottom: 10px;
    color: rgba(255, 255, 255, 0.9);
}

/* Unit Converter specific - enhanced alignment and positioning */
.conversion-panel {
    display: flex;
    flex-direction: column;
    gap: 30px;
    align-items: center;
    background: var(--liquid-glass-bg);
    backdrop-filter: var(--liquid-glass-blur);
    border: var(--liquid-glass-border);
    border-radius: 20px;
    padding: 35px;
    margin: 30px auto;
    max-width: 900px;
    width: 100%;
    position: relative;
    z-index: 5;
}

.conversion-row {
    display: flex;
    gap: 30px;
    align-items: center;
    width: 100%;
    max-width: 800px;
    justify-content: space-between;
    margin: 15px 0;
}

.conversion-arrow {
    font-size: 28px;
    color: var(--clr-accent);
    text-align: center;
    padding: 15px 0;
    font-weight: bold;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Statistics Calculator specific - enhanced layout and positioning */
.stats-textarea {
    min-height: 140px;
    resize: vertical;
    font-family: monospace;
    width: 100%;
    max-width: 700px;
    margin: 0 auto;
    line-height: 1.4;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 30px;
    margin: 35px auto;
    max-width: 1200px;
    padding: 0 20px;
    position: relative;
    z-index: 5;
}

.stats-category {
    background: var(--liquid-glass-bg);
    backdrop-filter: var(--liquid-glass-blur);
    border: var(--liquid-glass-border);
    box-shadow: var(--liquid-glass-shadow);
    border-radius: 18px;
    padding: 25px;
    position: relative;
    z-index: 5;
}

.stats-category h3 {
    color: var(--clr-accent);
    margin-bottom: 15px;
    font-size: 1.2rem;
}

.stats-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

/* Combinatorics Calculator specific */
.examples-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.example-card {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    padding: 15px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.example-card h4 {
    color: var(--clr-accent);
    margin-bottom: 8px;
}

.example-card p {
    margin-bottom: 5px;
    font-size: 14px;
}

.example-card small {
    color: rgba(255, 255, 255, 0.7);
    font-style: italic;
}

/* Enhanced Matrix Calculator specific - enhanced positioning */
.matrix-size-controls {
    display: flex;
    gap: 25px;
    align-items: center;
    flex-wrap: wrap;
    justify-content: center;
    margin: 30px auto;
    background: var(--liquid-glass-bg);
    backdrop-filter: var(--liquid-glass-blur);
    border: var(--liquid-glass-border);
    border-radius: 18px;
    padding: 30px;
    max-width: 800px;
    position: relative;
    z-index: 5;
}

.matrix-input-grid {
    display: grid;
    gap: 10px;
    margin: 30px auto;
    justify-content: center;
    background: white;
    border-radius: 18px;
    padding: 30px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    max-width: 600px;
    position: relative;
    z-index: 5;
}

.matrix-preset-buttons {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
    justify-content: center;
    margin: 25px auto;
    padding: 20px 0;
    max-width: 900px;
}

/* History containers */
.history-container {
    max-height: 300px;
    overflow-y: auto;
}

.history-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.history-item {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    padding: 10px 15px;
    border-left: 3px solid var(--clr-accent);
}

/* Result displays */
.calculation-result {
    background: rgba(40, 167, 69, 0.1);
    border: 1px solid rgba(40, 167, 69, 0.3);
    border-radius: 10px;
    padding: 20px;
    color: #28a745;
}

.result-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    font-weight: bold;
}

.result-content {
    font-family: monospace;
}

.calculation-display {
    font-size: 18px;
    margin-bottom: 10px;
}

.result-value {
    color: var(--clr-accent);
    font-weight: bold;
}

/* Error messages */
.error-message {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #ff6b6b;
}

/* Invalid inputs */
.function-input.invalid,
.equation-input.invalid,
.unit-input.invalid,
.combinatorics-input.invalid,
.size-input.invalid {
    border-color: #ff6b6b;
    background: rgba(255, 107, 107, 0.1);
}

/* Loading states */
.loading {
    opacity: 0.6;
    pointer-events: none;
    position: relative;
}

.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 20px;
    height: 20px;
    border: 2px solid transparent;
    border-top: 2px solid var(--clr-accent);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}

/* Mobile responsiveness - enhanced mobile layout with better positioning */
@media (max-width: 767px) {
    .function-calculator-container,
    .equation-solver-container,
    .unit-converter-container,
    .statistical-calculator-container,
    .combinatorics-calculator-container,
    .enhanced-matrix-calculator-container {
        padding: 20px 15px;
        min-height: auto;
    }
    
    .app-title {
        font-size: 1.8rem;
        margin-bottom: 30px;
        padding: 0 10px;
    }
    
    .function-controls,
    .equation-controls,
    .unit-converter-controls,
    .stats-controls,
    .combinatorics-controls,
    .enhanced-matrix-controls {
        gap: 25px;
        padding: 0 10px;
        max-width: 100%;
    }
    
    .function-input-panel,
    .equation-type-selector,
    .unit-category-selector,
    .stats-input-panel,
    .operation-type-selector,
    .matrix-operation-selector {
        padding: 25px 20px;
        margin-bottom: 20px;
        max-width: 100%;
    }
    
    .function-buttons,
    .equation-buttons,
    .unit-buttons,
    .stats-buttons,
    .combinatorics-buttons,
    .matrix-action-buttons {
        flex-direction: column;
        gap: 20px;
        margin: 25px auto;
        padding: 15px 0;
        max-width: 350px;
    }
    
    .function-btn, .equation-btn, .unit-btn, 
    .stats-btn, .combinatorics-btn, .matrix-btn {
        width: 100%;
        max-width: 320px;
        margin: 0 auto;
        padding: 15px 20px;
        font-size: 1.05rem;
    }
    
    .conversion-panel {
        padding: 25px 20px;
        margin: 25px auto;
        max-width: 100%;
    }
    
    .conversion-row {
        flex-direction: column;
        gap: 20px;
        max-width: 100%;
    }
    
    .matrix-size-controls {
        flex-direction: column;
        align-items: center;
        gap: 20px;
        padding: 25px 20px;
        max-width: 100%;
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
        gap: 20px;
        padding: 0 10px;
        max-width: 100%;
    }
    
    .stats-category {
        padding: 20px;
    }
    
    .result-container,
    .error-container,
    .history-container,
    .stats-results-container,
    .enhanced-result-container,
    .steps-container,
    .formula-container {
        max-width: 100%;
        padding: 25px 20px;
        margin: 25px auto;
        font-size: 15px;
        min-height: 100px;
    }
    
    .function-canvas-container,
    .stats-chart-container,
    .visualization-container {
        padding: 25px 20px;
        margin: 25px auto;
        max-width: 100%;
    }
    
    .matrix-input-grid {
        padding: 25px 20px;
        margin: 25px auto;
        max-width: 100%;
    }
}

/* Responsiveness for new applications */

/* Desktop - enhanced layout with better positioning */
@media (min-width: 1200px) {
    .function-controls {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 50px;
        align-items: start;
        max-width: 1400px;
        padding: 0 40px;
    }
    
    .stats-controls {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 50px;
        align-items: start;
        max-width: 1400px;
        padding: 0 40px;
    }
    
    .equation-controls,
    .unit-converter-controls {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
        align-items: start;
        max-width: 1300px;
        padding: 0 40px;
    }
    
    .combinatorics-controls,
    .enhanced-matrix-controls {
        max-width: 1500px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 40px;
        padding: 0 40px;
    }
    
    /* Enhanced button layout on desktop */
    .function-buttons,
    .equation-buttons,
    .unit-buttons,
    .stats-buttons,
    .combinatorics-buttons,
    .matrix-action-buttons {
        gap: 35px;
        padding: 25px 0;
        margin: 35px auto;
    }
    
    /* Better spacing for desktop containers */
    .function-input-panel,
    .equation-type-selector,
    .unit-category-selector,
    .stats-input-panel,
    .operation-type-selector,
    .matrix-operation-selector {
        padding: 40px;
        margin-bottom: 35px;
    }
}

/* Tablet - enhanced layout with better positioning */
@media (max-width: 1199px) and (min-width: 769px) {
    .function-controls,
    .stats-controls,
    .equation-controls,
    .unit-converter-controls,
    .combinatorics-controls,
    .enhanced-matrix-controls {
        display: flex;
        flex-direction: column;
        gap: 30px;
        max-width: 900px;
        padding: 0 30px;
    }
    
    .function-canvas-container,
    .stats-chart-container,
    .visualization-container {
        margin: 35px auto;
        max-width: 800px;
    }
    
    .function-canvas,
    .stats-canvas,
    .matrix-canvas {
        max-width: 100%;
        height: auto;
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
        gap: 25px;
        max-width: 800px;
        padding: 0 20px;
    }
    
    .conversion-panel {
        max-width: 800px;
        padding: 30px;
    }
    
    .matrix-size-controls {
        max-width: 700px;
        padding: 25px;
    }
}

/* Small screens - enhanced mobile optimization */
@media (max-width: 480px) {
    .function-calculator-container,
    .equation-solver-container,
    .unit-converter-container,
    .statistical-calculator-container,
    .combinatorics-calculator-container,
    .enhanced-matrix-calculator-container {
        padding: 15px 10px;
        min-height: auto;
    }
    
    .app-title {
        font-size: 1.6rem;
        margin-bottom: 25px;
        padding: 0 5px;
    }
    
    .function-controls,
    .equation-controls,
    .unit-converter-controls,
    .stats-controls,
    .combinatorics-controls,
    .enhanced-matrix-controls {
        gap: 20px;
        padding: 0 5px;
    }
    
    .function-input-panel,
    .equation-type-selector,
    .unit-category-selector,
    .stats-input-panel,
    .operation-type-selector,
    .matrix-operation-selector {
        padding: 20px 15px;
        margin-bottom: 18px;
        max-width: 100%;
    }
    
    .function-buttons,
    .equation-buttons,
    .unit-buttons,
    .stats-buttons,
    .combinatorics-buttons,
    .matrix-action-buttons {
        gap: 15px;
        margin: 20px auto;
        padding: 10px 0;
        max-width: 300px;
    }
    
    .function-btn, .equation-btn, .unit-btn, 
    .stats-btn, .combinatorics-btn, .matrix-btn {
        padding: 12px 18px;
        font-size: 1rem;
        max-width: 280px;
    }
    
    .conversion-panel {
        padding: 20px 15px;
        margin: 20px auto;
    }
    
    .matrix-size-controls {
        padding: 20px 15px;
        gap: 15px;
    }
    
    .stats-grid {
        gap: 15px;
        padding: 0 5px;
    }
    
    .stats-category {
        padding: 18px;
    }
    
    .result-container,
    .error-container,
    .history-container,
    .stats-results-container,
    .enhanced-result-container,
    .steps-container,
    .formula-container {
        padding: 20px 15px;
        margin: 20px auto;
        font-size: 14px;
        min-height: 90px;
    }
    
    .function-canvas-container,
    .stats-chart-container,
    .visualization-container {
        padding: 20px 15px;
        margin: 20px auto;
    }
    
    .function-canvas,
    .stats-canvas,
    .matrix-canvas {
        height: 220px;
        width: 100%;
        border-radius: 8px;
    }
    
    .matrix-input-grid {
        padding: 20px 15px;
        margin: 20px auto;
    }
    
    .stats-textarea {
        min-height: 120px;
        max-width: 100%;
    }
}

/* Tiles responsiveness - horizontal on desktop, vertical with scroll on mobile */
@media (min-width: 1200px) {
    .tiles {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 25px;
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 20px;
    }
}

@media (min-width: 900px) and (max-width: 1199px) {
    .tiles {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        max-width: 1000px;
        margin: 0 auto;
        padding: 0 20px;
    }
}

@media (min-width: 600px) and (max-width: 899px) {
    .tiles {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 18px;
        max-width: 700px;
        margin: 0 auto;
        padding: 0 20px;
    }
}

@media (max-width: 599px) {
    .home-screen {
        overflow-y: scroll;
        max-height: 100vh;
        padding: 20px 0;
        scrollbar-width: thin;
        scrollbar-color: rgba(224, 122, 95, 0.5) transparent;
    }
    
    .home-screen::-webkit-scrollbar {
        width: 6px;
    }
    
    .home-screen::-webkit-scrollbar-track {
        background: transparent;
    }
    
    .home-screen::-webkit-scrollbar-thumb {
        background: rgba(224, 122, 95, 0.5);
        border-radius: 3px;
    }
    
    .tiles {
        display: flex;
        flex-direction: column;
        gap: 15px;
        max-width: 400px;
        margin: 0 auto;
        padding: 0 20px 40px 20px;
    }
    
    .tile {
        width: 100%;
        height: 120px;
        margin: 0;
    }
}

/* Add scrolling for home screen */
.home-screen {
    overflow-y: auto;
    max-height: 100vh;
    padding: 20px 0;
}

/* Ensure proper scrolling for apps */
.app-content.active {
    overflow-y: auto;
    max-height: 100vh;
}

.system-inputs {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    padding: 20px;
}

.equation-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    color: white;
    font-size: 16px;
}

.equation-row input {
    width: 80px;
    padding: 8px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 5px;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    text-align: center;
}

.solution-container {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 25px;
    margin-top: 20px;
}

.solution-steps {
    margin-bottom: 25px;
}

.solution-steps h4 {
    color: #e07a5f;
    margin-bottom: 15px;
}

.solution-steps ol {
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
}

.solution-result h4 {
    color: #e07a5f;
    margin-bottom: 15px;
}

.solution-value {
    background: rgba(224, 122, 95, 0.2);
    padding: 12px;
    border-radius: 8px;
    margin-bottom: 10px;
    color: white;
    font-weight: bold;
    font-size: 18px;
}

.solution-message {
    padding: 15px;
    border-radius: 8px;
    font-weight: bold;
    text-align: center;
}

.solution-message.infinite {
    background: rgba(76, 175, 80, 0.2);
    color: #4CAF50;
}

.solution-message.none {
    background: rgba(244, 67, 54, 0.2);
    color: #f44336;
}

/* Unit Converter Styles */
.unit-converter-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
}

.converter-controls {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    margin-bottom: 30px;
}

.converter-input-panel {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 25px;
}

.category-selector {
    margin-bottom: 25px;
}

.conversion-form {
    display: grid;
    gap: 15px;
}

.unit-row {
    display: grid;
    grid-template-columns: 2fr auto 2fr;
    gap: 10px;
    align-items: center;
}

.swap-button {
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 50%;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.swap-button:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: rotate(180deg);
}

.conversion-result {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 15px;
    padding: 25px;
}

.conversion-display {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 20px;
    align-items: center;
    margin-bottom: 20px;
}

.from-value, .to-value {
    text-align: center;
    padding: 15px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    color: white;
    font-weight: bold;
    font-size: 18px;
}

.conversion-arrow {
    color: #e07a5f;
    font-size: 24px;
    text-align: center;
}

.conversion-formula {
    background: rgba(224, 122, 95, 0.1);
    padding: 12px;
    border-radius: 8px;
    color: rgba(255, 255, 255, 0.9);
    text-align: center;
    font-style: italic;
}

.conversion-history {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 25px;
    margin-top: 30px;
}

.history-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    margin-bottom: 10px;
    color: white;
}

.history-conversion {
    font-weight: bold;
}

.history-category {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.7);
}

/* Common Result Styles */
.calculation-result {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 20px;
    margin-top: 20px;
}

.result-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    color: #e07a5f;
    font-weight: bold;
}

.result-content {
    color: white;
}

.calculation-display {
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 10px;
}

.result-value {
    color: #e07a5f;
}

.result-details {
    color: rgba(255, 255, 255, 0.7);
    font-size: 14px;
}

/* Error Styles */
.error-message {
    display: flex;
    align-items: center;
    gap: 10px;
    background: rgba(244, 67, 54, 0.2);
    border: 1px solid rgba(244, 67, 54, 0.5);
    color: #f44336;
    padding: 15px;
    border-radius: 8px;
    margin-top: 15px;
}

/* Input Validation */
.function-input.invalid,
.coeff-input.invalid {
    border-color: #f44336;
    background: rgba(244, 67, 54, 0.1);
}

/* Light Mode Support */
body:not(.dark-mode) .function-calculator-container,
body:not(.dark-mode) .equation-solver-container,
body:not(.dark-mode) .unit-converter-container {
    color: #333;
}

body:not(.dark-mode) .function-input-panel,
body:not(.dark-mode) .equation-type-selector,
body:not(.dark-mode) .converter-input-panel,
body:not(.dark-mode) .conversion-result,
body:not(.dark-mode) .solution-container,
body:not(.dark-mode) .calculation-result {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(0, 0, 0, 0.1);
    color: #333;
}

body:not(.dark-mode) .function-input-group label,
body:not(.dark-mode) .input-group label {
    color: #333;
}

body:not(.dark-mode) .function-select,
body:not(.dark-mode) .function-input,
body:not(.dark-mode) .coeff-input {
    background: rgba(0, 0, 0, 0.05);
    color: #333;
    border-color: rgba(0, 0, 0, 0.2);
}

body:not(.dark-mode) .equation-text {
    color: #e07a5f;
}

body:not(.dark-mode) .from-value,
body:not(.dark-mode) .to-value {
    background: rgba(0, 0, 0, 0.05);
    color: #333;
}

/* Responsive Design */
@media (max-width: 768px) {
    .function-controls,
    .converter-controls {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    .function-buttons {
        grid-template-columns: 1fr;
    }
    
    .conversion-display {
        grid-template-columns: 1fr;
        gap: 10px;
    }
    
    .conversion-arrow {
        transform: rotate(90deg);
    }
    
    .unit-row {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .swap-button {
        width: 100%;
        height: auto;
        padding: 10px;
        border-radius: 8px;
    }
}

@media (max-width: 480px) {
    .function-calculator-container,
    .equation-solver-container,
    .unit-converter-container {
        padding: 15px;
    }
    
    .function-input-panel,
    .equation-type-selector,
    .converter-input-panel {
        padding: 20px;
    }
}

/* Statistical Calculator - Additional Styles */
.stats-checkboxes {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    margin-top: 10px;
}

.stats-checkbox {
    display: flex;
    align-items: center;
    gap: 8px;
    color: white;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.stats-checkbox:hover {
    color: #e07a5f;
}

.stats-checkbox input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: #e07a5f;
    cursor: pointer;
}

.data-display {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(224, 122, 95, 0.3);
    border-radius: 8px;
    padding: 15px;
    margin-top: 10px;
    min-height: 50px;
    color: white;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    line-height: 1.5;
    overflow-wrap: break-word;
}

.data-item {
    display: inline-block;
    background: rgba(224, 122, 95, 0.2);
    border: 1px solid rgba(224, 122, 95, 0.4);
    border-radius: 4px;
    padding: 2px 6px;
    margin: 2px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.data-item:hover {
    background: rgba(224, 122, 95, 0.4);
    border-color: #e07a5f;
    transform: translateY(-1px);
}

.data-more {
    color: #888;
    font-style: italic;
    margin-left: 5px;
}

.default-result-text {
    text-align: center;
    color: #888;
    font-style: italic;
    padding: 40px 20px;
    font-size: 16px;
}

.statistical-results {
    margin-top: 20px;
}

.result-section {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(224, 122, 95, 0.3);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
}

.result-section h4 {
    color: #e07a5f;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.result-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 15px;
}

.result-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 6px;
    border-left: 3px solid #e07a5f;
}

.result-item.full-width {
    grid-column: 1 / -1;
}

.result-label {
    color: #ccc;
    font-weight: 500;
}

.result-value {
    color: white;
    font-weight: bold;
    font-family: 'Courier New', monospace;
}

/* Stats Controls Enhanced */
.stats-controls-enhanced {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    margin-bottom: 30px;
    max-width: 1400px;
    margin-left: auto;
    margin-right: auto;
}

.stats-input-panel-enhanced {
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(224, 122, 95, 0.3);
    border-radius: 15px;
    padding: 25px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

.stats-chart-container-enhanced {
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(224, 122, 95, 0.3);
    border-radius: 15px;
    padding: 25px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    display: flex;
    flex-direction: column;
    align-items: center;
}

.stats-canvas {
    border: 1px solid rgba(224, 122, 95, 0.3);
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.95);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    margin-top: 10px;
}

.stats-results-container-enhanced {
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(224, 122, 95, 0.3);
    border-radius: 15px;
    padding: 25px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    margin-top: 30px;
}

.stats-buttons-enhanced {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 20px;
}

@media (max-width: 1200px) {
    .stats-controls-enhanced {
        grid-template-columns: 1fr;
        gap: 20px;
    }
}

/* Operation Button Styles - Synchronized with simple matrix calculator */
.operation-btn,
#matrixCalculatorApp .operation-btn,
#enhancedOperationBtn {
    background: var(--liquid-glass-bg);
    backdrop-filter: var(--liquid-glass-blur);
    -webkit-backdrop-filter: var(--liquid-glass-blur);
    border: var(--liquid-glass-border);
    box-shadow: var(--liquid-glass-shadow);
    color: black;
    border-radius: 25px;
    padding: 12px 24px;
    font-size: 1.1rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
    margin-bottom: 20px;
    position: relative;
    overflow: hidden;
    z-index: 1;
    min-width: 150px;
    text-align: center;
    display: inline-block;
}

.operation-btn:hover,
#matrixCalculatorApp .operation-btn:hover,
#enhancedOperationBtn:hover {
    color: white;
    background-color: rgba(224, 122, 95, 0.8);
    transform: translateY(-2px);
    box-shadow: 
        0 6px 12px rgba(0, 0, 0, 0.25),
        inset 0 0 0 1px rgba(255, 255, 255, 0.1);
}

.operation-btn:active,
#matrixCalculatorApp .operation-btn:active,
#enhancedOperationBtn:active {
    transform: scale(0.95);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Operation Menu Styles - Fully synchronized with simple matrix calculator */
.operation-menu,
#matrixCalculatorApp .operation-menu,
#enhancedOperationMenu,
.method-menu,
.lang-menu {
    position: absolute;
    top: calc(100% + 2px);
    left: 50%;
    transform: translateX(-50%);
    background: var(--liquid-glass-bg-black);
    backdrop-filter: var(--liquid-glass-blur);
    -webkit-backdrop-filter: var(--liquid-glass-blur);
    border: var(--liquid-glass-border);
    box-shadow: var(--liquid-glass-shadow);
    border-radius: 20px;
    z-index: 1200;
    width: max-content;
    min-width: 180px;
    max-width: 250px;
    padding: 10px 0;
    margin-top: 0;
    opacity: 0;
    visibility: hidden;
    transform-origin: top center;
    transform: translateX(-50%) scaleY(0);
    transition: 
        opacity 0.3s ease,
        transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1),
        visibility 0.3s ease;
}

.operation-menu.open,
#matrixCalculatorApp .operation-menu.open,
#enhancedOperationMenu.open,
.method-menu.open,
.lang-menu.open {
    display: block;
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) scaleY(1);
    transition: 
        opacity 0.3s ease,
        transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1),
        visibility 0.3s ease;
}

.operation-menu.closing,
#matrixCalculatorApp .operation-menu.closing,
#enhancedOperationMenu.closing,
.method-menu.closing,
.lang-menu.closing {
    opacity: 0;
    visibility: hidden;
    transform: translateX(-50%) scaleY(0);
    transition: 
        opacity 0.2s ease,
        transform 0.2s ease,
        visibility 0.2s ease;
    pointer-events: none;
}

.operation-menu-item,
#matrixCalculatorApp .operation-menu-item,
#enhancedOperationMenu .operation-menu-item,
.method-menu-item,
.lang-menu div {
    padding: 10px 15px;
    color: white;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    text-align: center;
    opacity: 0;
    transform: translateY(10px);
    position: relative;
    z-index: 1;
    margin: 2px 8px;
    border-radius: 20px;
    border: 1px solid transparent;
}

.operation-menu-item:last-child {
    border-bottom: none;
}

.operation-menu-item:hover,
#matrixCalculatorApp .operation-menu-item:hover,
#enhancedOperationMenu .operation-menu-item:hover {
    background-color: rgba(255, 124, 87, 0.5) !important;
    color: white !important;
    font-weight: bold;
    border-radius: 20px !important;
    transform: translateY(-5px) !important;
    box-shadow: 
        0 0 12px rgba(255, 124, 87, 0.5),
        inset 0 0 0 1px rgba(255, 255, 255, 0.2) !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
}

.operation-menu.open .operation-menu-item,
#matrixCalculatorApp .operation-menu.open .operation-menu-item,
#enhancedOperationMenu.open .operation-menu-item {
    opacity: 1;
    transform: translateY(0);
    transition: 
        opacity 0.3s ease,
        transform 0.3s ease;
    transition-delay: calc(var(--i) * 0.1s);
}

.operation-menu.closing .operation-menu-item,
#matrixCalculatorApp .operation-menu.closing .operation-menu-item,
#enhancedOperationMenu.closing .operation-menu-item {
    opacity: 0;
    transform: translateY(-10px);
    transition: 
        opacity 0.2s ease,
        transform 0.2s ease;
    transition-delay: calc(var(--i) * 0.05s);
}

/* Prevent div hover effects inside menu items */
.operation-menu-item div:hover,
#matrixCalculatorApp .operation-menu-item div:hover,
#enhancedOperationMenu .operation-menu-item div:hover {
    all: unset !important;
    background-color: transparent !important;
    color: inherit !important;
    border-radius: inherit !important;
    transform: inherit !important;
    box-shadow: none !important;
}

@media (max-width: 768px) {
    .result-grid {
        grid-template-columns: 1fr;
    }
    
    .stats-checkboxes {
        flex-direction: column;
        gap: 10px;
    }
    
    .stats-buttons-enhanced {
        flex-direction: column;
        align-items: stretch;
    }
    
    .operation-menu {
        position: fixed;
        top: 50%;
        left: 50%;
        right: auto;
        transform: translate(-50%, -50%);
        width: 90%;
        max-width: 300px;
        max-height: 60vh;
    }
    
    .operation-menu.open {
        transform: translate(-50%, -50%);
    }
}

/* Size Control Styles for Enhanced Matrix Calculator */
.size-input-group {
    display: flex;
    align-items: center;
    gap: 15px;
    justify-content: center;
    margin-bottom: 20px;
}

.size-input-group label {
    color: white;
    font-weight: 600;
    margin-right: 5px;
}

.matrix-size-input {
    width: 60px;
    padding: 8px 10px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    text-align: center;
    font-size: 14px;
    font-weight: bold;
    transition: all 0.3s ease;
}

.matrix-size-input:focus {
    outline: none;
    border-color: rgba(224, 122, 95, 0.6);
    box-shadow: 0 0 10px rgba(224, 122, 95, 0.3);
    background: rgba(255, 255, 255, 0.15);
}

.matrix-size-input:hover {
    border-color: rgba(224, 122, 95, 0.4);
    background: rgba(255, 255, 255, 0.12);
}

/* Size Menu Styles - Synchronized with simple matrix calculator */
#matrixCalculatorApp .size-menu,
#enhancedSizeMenuA {
    position: fixed;
    display: none;
    gap: 12px;
    min-width: 170px;
    max-width: 90vw;
    border-radius: 20px;
    z-index: 1100;
    padding: 15px;
    opacity: 0;
    visibility: hidden;
    transform-origin: top center;
    flex-direction: column;
    background: var(--liquid-glass-bg-black);
    backdrop-filter: var(--liquid-glass-blur);
    -webkit-backdrop-filter: var(--liquid-glass-blur);
    border: var(--liquid-glass-border);
    box-shadow: var(--liquid-glass-shadow);
    transform: scaleY(0);
    transition: 
        opacity 0.3s ease,
        transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1),
        visibility 0.3s ease;
}

#matrixCalculatorApp .size-menu.open,
#enhancedSizeMenuA.open {
    display: flex;
    opacity: 1;
    visibility: visible;
    transform: scaleY(1);
    transition: 
        opacity 0.3s ease,
        transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1),
        visibility 0.3s ease;
}

#matrixCalculatorApp .size-menu.closing,
#enhancedSizeMenuA.closing {
    animation: collapse-genie 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    pointer-events: none;
}

#matrixCalculatorApp .size-option,
#enhancedSizeMenuA .size-option {
    padding: 12px 20px;
    color: white;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    text-align: center;
    opacity: 0;
    transform: translateY(10px);
    position: relative;
    z-index: 1;
    margin: 2px 8px;
    border-radius: 20px;
    border: 1px solid transparent;
    font-weight: 600;
    background: rgba(255, 255, 255, 0.05);
}

#matrixCalculatorApp .size-option:hover,
#enhancedSizeMenuA .size-option:hover {
    background-color: rgba(255, 124, 87, 0.5) !important;
    color: white !important;
    font-weight: bold;
    border-radius: 20px !important;
    transform: translateY(-5px) !important;
    box-shadow: 
        0 0 12px rgba(255, 124, 87, 0.5),
        inset 0 0 0 1px rgba(255, 255, 255, 0.2) !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
}

#matrixCalculatorApp .size-menu.open .size-option,
#enhancedSizeMenuA.open .size-option {
    opacity: 1;
    transform: translateY(0);
    transition: 
        opacity 0.3s ease,
        transform 0.3s ease;
    transition-delay: calc(var(--i) * 0.1s);
}

#matrixCalculatorApp .size-menu.closing .size-option,
#enhancedSizeMenuA.closing .size-option {
    opacity: 0;
    transform: translateY(-10px);
    transition: 
        opacity 0.2s ease,
        transform 0.2s ease;
    transition-delay: calc(var(--i) * 0.05s);
}

@keyframes collapse-genie {
    0% {
        transform: scaleY(1);
        opacity: 1;
    }
    50% {
        transform: scaleY(0.3) scaleX(0.8);
        opacity: 0.7;
    }
    100% {
        transform: scaleY(0) scaleX(0.5);
        opacity: 0;
        visibility: hidden;
    }
}

/* =================================
   PEŁNA RESPONSYWNOŚĆ DLA KAFELKÓW I APLIKACJI
   ================================= */

/* Tablet i większe telefony (768px - 1023px) */
@media (max-width: 1023px) {
    /* Kafelki na home-screen */
    .home-screen {
        padding: 20px 15px;
    }
    
    .tiles {
        gap: 20px;
        padding: 0 10px;
    }
    
    .tile {
        padding: 25px 20px;
        min-height: 120px;
    }
    
    /* Aplikacje - responsywne kontenery */
    .function-calculator-container,
    .equation-solver-container,
    .unit-converter-container,
    .statistical-calculator-container,
    .combinatorics-calculator-container,
    .enhanced-matrix-calculator-container {
        padding: 15px 10px;
        margin: 0;
    }
    
    /* Tytuły aplikacji */
    .app-title {
        font-size: 1.8rem;
        margin-bottom: 25px;
    }
    
    /* Kontrolki */
    .function-controls,
    .equation-controls,
    .unit-converter-controls,
    .stats-controls,
    .combinatorics-controls,
    .enhanced-matrix-controls {
        padding: 0 10px;
        gap: 25px;
    }
    
    /* Panele wejściowe */
    .function-input-panel,
    .equation-type-selector,
    .unit-category-selector,
    .stats-input-panel,
    .combinatorics-input-panel,
    .enhanced-matrix-input-panel {
        padding: 20px 15px;
        margin: 0 5px;
    }
    
    /* Przyciski */
    .calculate-btn,
    .solve-btn,
    .convert-btn,
    .stats-calculate-btn,
    .combinatorics-calculate-btn,
    .enhanced-calculate-btn {
        padding: 15px 30px;
        font-size: 1rem;
    }
    
    /* Menu operacji */
    .operation-menu,
    .size-menu,
    #enhancedSizeMenuA {
        max-width: 95vw;
        left: 50% !important;
        transform: translateX(-50%) !important;
        right: auto !important;
    }
    
    /* Matrix calculator specific */
    .matrix-calculator-container,
    .enhanced-matrix-calculator-container {
        padding: 15px 10px;
    }
    
    .matrix-input,
    .enhanced-matrix-input {
        margin: 0 5px;
        overflow-x: auto;
    }
    
    .matrix-table {
        min-width: 300px;
        font-size: 14px;
    }
}

/* Małe tablety i duże telefony (481px - 767px) */
@media (max-width: 767px) {
    /* Kafelki */
    .tiles {
        gap: 15px;
        padding: 0 5px;
    }
    
    .tile {
        padding: 20px 15px;
        min-height: 110px;
    }
    
    .tile h3 {
        font-size: 1.1rem;
        margin-bottom: 8px;
    }
    
    .tile p {
        font-size: 0.85rem;
    }
    
    /* Aplikacje */
    .app-title {
        font-size: 1.6rem;
        margin-bottom: 20px;
    }
    
    /* Kontrolki */
    .function-controls,
    .equation-controls,
    .unit-converter-controls,
    .stats-controls,
    .combinatorics-controls,
    .enhanced-matrix-controls {
        gap: 20px;
        padding: 0 5px;
    }
    
    /* Panele */
    .function-input-panel,
    .equation-type-selector,
    .unit-category-selector,
    .stats-input-panel,
    .combinatorics-input-panel,
    .enhanced-matrix-input-panel {
        padding: 15px 10px;
        margin: 0;
    }
    
    /* Inputy */
    .function-input,
    .equation-input,
    .unit-input,
    .stats-input,
    .combinatorics-input {
        font-size: 16px; /* Zapobiega zoom na iOS */
        padding: 12px 15px;
    }
    
    /* Select elements */
    .function-type,
    .equation-type,
    .unit-from,
    .unit-to,
    .stats-type,
    .combinatorics-type {
        font-size: 16px;
        padding: 12px 15px;
    }
    
    /* Menu */
    .operation-menu,
    .size-menu,
    #enhancedSizeMenuA {
        max-width: 90vw;
    }
    
    .operation-option,
    .size-option {
        padding: 12px 15px;
        font-size: 0.9rem;
    }
    
    /* Matrix tables */
    .matrix-table {
        font-size: 12px;
    }
    
    .matrix-table input {
        width: 45px;
        height: 35px;
        font-size: 12px;
    }
}

/* Telefony (320px - 480px) */
@media (max-width: 480px) {
    /* Kafelki */
    .home-screen {
        padding: 15px 10px;
    }
    
    .tiles {
        flex-direction: column;
        gap: 10px;
        padding: 0;
    }
    
    .tile {
        padding: 20px 15px;
        min-height: 100px;
        width: 100%;
        flex: 0 0 auto;
    }
    
    .tile h3 {
        font-size: 1rem;
        margin-bottom: 6px;
    }
    
    .tile p {
        font-size: 0.8rem;
        line-height: 1.3;
    }
    
    /* Aplikacje */
    .function-calculator-container,
    .equation-solver-container,
    .unit-converter-container,
    .statistical-calculator-container,
    .combinatorics-calculator-container,
    .enhanced-matrix-calculator-container {
        padding: 10px 8px;
    }
    
    .app-title {
        font-size: 1.4rem;
        margin-bottom: 15px;
    }
    
    /* Kontrolki w kolumnie */
    .function-controls,
    .equation-controls,
    .unit-converter-controls,
    .stats-controls,
    .combinatorics-controls,
    .enhanced-matrix-controls {
        gap: 15px;
        padding: 0;
    }
    
    /* Panele pełna szerokość */
    .function-input-panel,
    .equation-type-selector,
    .unit-category-selector,
    .stats-input-panel,
    .combinatorics-input-panel,
    .enhanced-matrix-input-panel {
        width: 100%;
        margin: 0;
        padding: 12px 8px;
        box-sizing: border-box;
    }
    
    /* Przyciski pełna szerokość */
    .calculate-btn,
    .solve-btn,
    .convert-btn,
    .stats-calculate-btn,
    .combinatorics-calculate-btn,
    .enhanced-calculate-btn {
        width: 100%;
        padding: 15px;
        font-size: 1rem;
        margin: 0;
    }
    
    /* Menu */
    .operation-menu,
    .size-menu,
    #enhancedSizeMenuA {
        max-width: 95vw;
        margin: 0 auto;
    }
    
    .operation-option,
    .size-option {
        padding: 15px 12px;
        font-size: 0.85rem;
        text-align: center;
    }
    
    /* Matrix calculator mobile optimizations */
    .matrix-calculator-container,
    .enhanced-matrix-calculator-container {
        padding: 10px 5px;
    }
    
    .matrix-controls,
    .enhanced-matrix-controls {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
    }
    
    .matrix-input,
    .enhanced-matrix-input {
        margin: 0;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .matrix-table {
        min-width: 280px;
        font-size: 11px;
    }
    
    .matrix-table input {
        width: 35px;
        height: 30px;
        font-size: 11px;
        padding: 2px;
    }
    
    /* Results responsive */
    .function-result,
    .equation-result,
    .unit-result,
    .stats-result,
    .combinatorics-result,
    .enhanced-matrix-result,
    .matrix-result {
        padding: 15px 10px;
        margin: 10px 0;
        font-size: 0.9rem;
        word-wrap: break-word;
        overflow-wrap: break-word;
    }
}

/* Ultra małe ekrany (poniżej 320px) */
@media (max-width: 319px) {
    .tiles {
        padding: 0 5px;
    }
    
    .tile {
        padding: 15px 10px;
        min-height: 90px;
    }
    
    .tile h3 {
        font-size: 0.9rem;
    }
    
    .tile p {
        font-size: 0.75rem;
    }
    
    .app-title {
        font-size: 1.2rem;
    }
    
    .matrix-table input {
        width: 30px;
        height: 28px;
        font-size: 10px;
    }
    
    .operation-option,
    .size-option {
        padding: 12px 8px;
        font-size: 0.8rem;
    }
}

/* Landscape mode na telefonach */
@media (max-height: 500px) and (orientation: landscape) {
    .app-title {
        font-size: 1.3rem;
        margin-bottom: 10px;
    }
    
    .function-controls,
    .equation-controls,
    .unit-converter-controls,
    .stats-controls,
    .combinatorics-controls,
    .enhanced-matrix-controls {
        gap: 10px;
    }
    
    .function-input-panel,
    .equation-type-selector,
    .unit-category-selector,
    .stats-input-panel,
    .combinatorics-input-panel,
    .enhanced-matrix-input-panel {
        padding: 10px 8px;
    }
    
    .tiles {
        flex-direction: row;
        flex-wrap: wrap;
    }
    
    .tile {
        min-height: 80px;
        padding: 15px 12px;
    }
}

/* High DPI screens (Retina) */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .tile {
        border-width: 0.5px;
    }
    
    .operation-option,
    .size-option {
        border-width: 0.5px;
    }
    
    .matrix-table {
        border-collapse: separate;
        border-spacing: 1px;
    }
}

/* Accessibility - Reduced motion */
@media (prefers-reduced-motion: reduce) {
    .tile,
    .operation-option,
    .size-option,
    .calculate-btn,
    .solve-btn,
    .convert-btn,
    .stats-calculate-btn,
    .combinatorics-calculate-btn,
    .enhanced-calculate-btn {
        transition: none;
    }
    
    .operation-menu,
    .size-menu,
    #enhancedSizeMenuA {
        animation: none;
    }
}

/* Print styles */
@media print {
    .home-screen,
    .app-container {
        background: white !important;
        color: black !important;
    }
    
    .tile {
        border: 1px solid #ccc;
        background: white;
        color: black;
        page-break-inside: avoid;
    }
    
    .operation-menu,
    .size-menu,
    #enhancedSizeMenuA {
        display: none;
    }
    
    .nav-bar,
    .dashboard {
        display: none;
    }
}
