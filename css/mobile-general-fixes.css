/* Mobile General Fixes - Ogólne poprawki dla urządzeń mobilnych */

/* Zapobiegaj niechcianemu zoomowaniu na iOS przy focus */
@media screen and (max-width: 768px) {
    input[type="text"],
    input[type="number"],
    input[type="email"],
    input[type="password"],
    textarea,
    select {
        font-size: 16px !important; /* Zapobiega autozoomowaniu na iOS */
    }
}

/* Poprawki dla 300ms delay na iOS */
* {
    -webkit-tap-highlight-color: transparent;
}

a, button, input, select, textarea {
    touch-action: manipulation;
}

/* Zapobiegaj "bouncing" na iOS */
body {
    overscroll-behavior-y: none;
    -webkit-overflow-scrolling: touch;
}

/* Poprawki dla scroll na mobile */
.home-screen,
.app-container,
.welcome-screen {
    -webkit-overflow-scrolling: touch;
    overflow-y: auto;
}

/* Ukryj scrollbar na mobile ale zachowaj funkcjonalność */
@media (max-width: 768px) {
    ::-webkit-scrollbar {
        width: 0px;
        background: transparent;
    }
    
    * {
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
}

/* Poprawki dla viewport na mobile browsers */
@supports (-webkit-touch-callout: none) {
    /* iOS specific fixes */
    body {
        min-height: -webkit-fill-available;
    }
    
    .home-screen,
    .welcome-screen,
    .app-container {
        min-height: -webkit-fill-available;
    }
}

/* Zapobiegaj selekcji tekstu przy dotknięciu */
.tile,
.tile *,
button,
.nav-item,
.menu-item {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* Ale pozwól na selekcję w inputach */
input,
textarea {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
}

/* Poprawki dla active state na mobile */
@media (hover: none) and (pointer: coarse) {
    .tile:active,
    button:active,
    .nav-item:active {
        opacity: 0.8;
    }
}

/* Zapobiegaj wyświetlaniu się menu kontekstowego przy długim dotknięciu */
.tile,
.tile *,
button,
.nav-item {
    -webkit-touch-callout: none;
}

/* Poprawki dla orientacji landscape na mobile */
@media (max-height: 500px) and (orientation: landscape) {
    .home-screen {
        padding: 5px;
    }
    
    .home-title {
        font-size: 1.5rem;
        margin-bottom: 10px;
    }
    
    .tiles {
        gap: 10px;
        padding: 10px;
        margin-top: 10px;
    }
}

/* Poprawki dla małych ekranów w trybie portrait */
@media (max-width: 480px) and (orientation: portrait) {
    .tiles {
        flex-direction: column;
        align-items: center;
        max-width: 100%;
    }
    
    .tile {
        width: 90%;
        max-width: 350px;
    }
}

/* Optymalizacja wydajności animacji na mobile */
@media (max-width: 768px) {
    * {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    
    .tile,
    button,
    .nav-item {
        transform: translateZ(0);
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
    }
}

/* Poprawki dla Safe Area (notch) na iOS */
@supports (padding: max(0px)) {
    .home-screen,
    .app-container {
        padding-left: max(10px, env(safe-area-inset-left));
        padding-right: max(10px, env(safe-area-inset-right));
        padding-bottom: max(10px, env(safe-area-inset-bottom));
    }
}

/* Zapobiegaj problemom z focusem na iOS */
input:focus,
textarea:focus,
select:focus {
    -webkit-user-select: text;
    user-select: text;
}

/* Poprawki dla Android Chrome */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
    select,
    textarea,
    input {
        font-size: 16px;
    }
}

/* Smooth scroll behavior */
@media (prefers-reduced-motion: no-preference) {
    html {
        scroll-behavior: smooth;
    }
}

/* Dla użytkowników preferujących zmniejszone animacje */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
